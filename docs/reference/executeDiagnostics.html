<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Execute cohort diagnostics functions — executeDiagnostics • CohortDiagnostics</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Execute cohort diagnostics functions — executeDiagnostics"><meta property="og:description" content="Execute cohort diagnostics on a set of cohorts.
Assumes that cohorts have already been instantiated in advance.
Note that none of the references passed to this function are used, they are required for results."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CohortDiagnostics</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.2.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/CreatingAStudyPackage.html">Creating a study package</a>
    </li>
    <li>
      <a href="../articles/DatabaseModeInDiagnosticsExplorer.html">Database mode in Diagnostics Explorer</a>
    </li>
    <li>
      <a href="../articles/RunningCohortDiagnostics.html">Running Cohort Diagnostics</a>
    </li>
    <li>
      <a href="../articles/ViewingResultsUsingDiagnosticsExplorer.html">Viewing results using Diagnostics Explorer</a>
    </li>
    <li>
      <a href="../articles/WhatIsCohortDiagnostics.html">What is Cohort Diagnostics?</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://ohdsi.github.io/Hades" class="external-link"><img src='https://ohdsi.github.io/Hades/images/hadesMini.png' width=80 height=17 style='vertical-align: top;'></a>
</li>
<li>
  <a href="https://github.com/OHDSI/CohortDiagnostics/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Execute cohort diagnostics functions</h1>
    <small class="dont-index">Source: <a href="https://github.com/OHDSI/CohortDiagnostics/blob/HEAD/R/RunDiagnostics.R" class="external-link"><code>R/RunDiagnostics.R</code></a></small>
    <div class="hidden name"><code>executeDiagnostics.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Execute cohort diagnostics on a set of cohorts.
Assumes that cohorts have already been instantiated in advance.</p>
<p>Note that none of the references passed to this function are used, they are required for results.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">executeDiagnostics</span><span class="op">(</span>
  <span class="va">cohortDefinitionSet</span>,
  <span class="va">exportFolder</span>,
  <span class="va">databaseId</span>,
  connectionDetails <span class="op">=</span> <span class="cn">NULL</span>,
  connection <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">cdmDatabaseSchema</span>,
  tempEmulationSchema <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"sqlRenderTempEmulationSchema"</span><span class="op">)</span>,
  <span class="va">cohortDatabaseSchema</span>,
  cohortTable <span class="op">=</span> <span class="st">"cohort"</span>,
  cohortTableNames <span class="op">=</span> <span class="fu">CohortGenerator</span><span class="fu">::</span><span class="fu"><a href="https://ohdsi.github.io/CohortGenerator/reference/getCohortTableNames.html" class="external-link">getCohortTableNames</a></span><span class="op">(</span>cohortTable <span class="op">=</span> <span class="va">cohortTable</span><span class="op">)</span>,
  vocabularyDatabaseSchema <span class="op">=</span> <span class="va">cdmDatabaseSchema</span>,
  cohortIds <span class="op">=</span> <span class="cn">NULL</span>,
  inclusionStatisticsFolder <span class="op">=</span> <span class="cn">NULL</span>,
  databaseName <span class="op">=</span> <span class="va">databaseId</span>,
  databaseDescription <span class="op">=</span> <span class="va">databaseId</span>,
  cdmVersion <span class="op">=</span> <span class="fl">5</span>,
  runInclusionStatistics <span class="op">=</span> <span class="cn">TRUE</span>,
  runIncludedSourceConcepts <span class="op">=</span> <span class="cn">TRUE</span>,
  runOrphanConcepts <span class="op">=</span> <span class="cn">TRUE</span>,
  runTimeDistributions <span class="op">=</span> <span class="cn">TRUE</span>,
  runVisitContext <span class="op">=</span> <span class="cn">TRUE</span>,
  runBreakdownIndexEvents <span class="op">=</span> <span class="cn">TRUE</span>,
  runIncidenceRate <span class="op">=</span> <span class="cn">TRUE</span>,
  runTimeSeries <span class="op">=</span> <span class="cn">FALSE</span>,
  runCohortOverlap <span class="op">=</span> <span class="cn">TRUE</span>,
  runCohortCharacterization <span class="op">=</span> <span class="cn">TRUE</span>,
  covariateSettings <span class="op">=</span> <span class="fu">createDefaultCovariateSettings</span><span class="op">(</span><span class="op">)</span>,
  runTemporalCohortCharacterization <span class="op">=</span> <span class="cn">TRUE</span>,
  temporalCovariateSettings <span class="op">=</span> <span class="fu">createTemporalCovariateSettings</span><span class="op">(</span>useConditionOccurrence <span class="op">=</span>
    <span class="cn">TRUE</span>, useDrugEraStart <span class="op">=</span> <span class="cn">TRUE</span>, useProcedureOccurrence <span class="op">=</span> <span class="cn">TRUE</span>, useMeasurement <span class="op">=</span> <span class="cn">TRUE</span>,
    temporalStartDays <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">365</span>, <span class="op">-</span><span class="fl">30</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">31</span><span class="op">)</span>, temporalEndDays <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">31</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">30</span>, <span class="fl">365</span><span class="op">)</span><span class="op">)</span>,
  minCellCount <span class="op">=</span> <span class="fl">5</span>,
  incremental <span class="op">=</span> <span class="cn">FALSE</span>,
  incrementalFolder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">exportFolder</span>, <span class="st">"incremental"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>cohortDefinitionSet</dt>
<dd><p>Data.frame of cohorts must include columns cohortId, cohortName, json, sql</p></dd>
<dt>exportFolder</dt>
<dd><p>The folder where the output will be exported to. If this folder
does not exist it will be created.</p></dd>
<dt>databaseId</dt>
<dd><p>A short string for identifying the database (e.g. 'Synpuf').</p></dd>
<dt>connectionDetails</dt>
<dd><p>An object of type <code>connectionDetails</code> as created using the
<code><a href="https://ohdsi.github.io/DatabaseConnector/reference/createConnectionDetails.html" class="external-link">createConnectionDetails</a></code> function in the
DatabaseConnector package. Can be left NULL if <code>connection</code> is
provided.</p></dd>
<dt>connection</dt>
<dd><p>An object of type <code>connection</code> as created using the
<code><a href="https://ohdsi.github.io/DatabaseConnector/reference/connect.html" class="external-link">connect</a></code> function in the
DatabaseConnector package. Can be left NULL if <code>connectionDetails</code>
is provided, in which case a new connection will be opened at the start
of the function, and closed when the function finishes.</p></dd>
<dt>cdmDatabaseSchema</dt>
<dd><p>Schema name where your patient-level data in OMOP CDM format resides.
Note that for SQL Server, this should include both the database and
schema name, for example 'cdm_data.dbo'.</p></dd>
<dt>tempEmulationSchema</dt>
<dd><p>Some database platforms like Oracle and Impala do not truly support temp tables. To emulate temp 
tables, provide a schema with write privileges where temp tables can be created.</p></dd>
<dt>cohortDatabaseSchema</dt>
<dd><p>Schema name where your cohort table resides. Note that for SQL Server,
this should include both the database and schema name, for example
'scratch.dbo'.</p></dd>
<dt>cohortTable</dt>
<dd><p>Name of the cohort table.</p></dd>
<dt>cohortTableNames</dt>
<dd><p>Cohort Table names used by CohortGenerator package</p></dd>
<dt>vocabularyDatabaseSchema</dt>
<dd><p>Schema name where your OMOP vocabulary data resides. This is 
commonly the same as cdmDatabaseSchema. Note that for 
SQL Server, this should include both the database and
schema name, for example 'vocabulary.dbo'.</p></dd>
<dt>cohortIds</dt>
<dd><p>Optionally, provide a subset of cohort IDs to restrict the
diagnostics to.</p></dd>
<dt>inclusionStatisticsFolder</dt>
<dd><p>The folder where the inclusion rule statistics are stored. Can be
left NULL if <code>runInclusionStatistics = FALSE</code>.</p></dd>
<dt>databaseName</dt>
<dd><p>The full name of the database. If NULL, defaults to databaseId.</p></dd>
<dt>databaseDescription</dt>
<dd><p>A short description (several sentences) of the database. If NULL, defaults to databaseId.</p></dd>
<dt>cdmVersion</dt>
<dd><p>The version of the OMOP CDM. Default 5. (Note: only 5 is supported.)</p></dd>
<dt>runInclusionStatistics</dt>
<dd><p>Generate and export statistic on the cohort inclusion rules?</p></dd>
<dt>runIncludedSourceConcepts</dt>
<dd><p>Generate and export the source concepts included in the cohorts?</p></dd>
<dt>runOrphanConcepts</dt>
<dd><p>Generate and export potential orphan concepts?</p></dd>
<dt>runTimeDistributions</dt>
<dd><p>Generate and export cohort time distributions?</p></dd>
<dt>runVisitContext</dt>
<dd><p>Generate and export index-date visit context?</p></dd>
<dt>runBreakdownIndexEvents</dt>
<dd><p>Generate and export the breakdown of index events?</p></dd>
<dt>runIncidenceRate</dt>
<dd><p>Generate and export the cohort incidence  rates?</p></dd>
<dt>runTimeSeries</dt>
<dd><p>Generate and export the cohort prevalence  rates?</p></dd>
<dt>runCohortOverlap</dt>
<dd><p>Generate and export the cohort overlap? Overlaps are checked within cohortIds
that have the same phenotype ID sourced from the CohortSetReference or
cohortToCreateFile.</p></dd>
<dt>runCohortCharacterization</dt>
<dd><p>Generate and export the cohort characterization?
Only records with values greater than 0.0001 are returned.</p></dd>
<dt>covariateSettings</dt>
<dd><p>Either an object of type <code>covariateSettings</code> as created using one of
the createCovariateSettings function in the FeatureExtraction package, or a list
of such objects.</p></dd>
<dt>runTemporalCohortCharacterization</dt>
<dd><p>Generate and export the temporal cohort characterization?
Only records with values greater than 0.001 are returned.</p></dd>
<dt>temporalCovariateSettings</dt>
<dd><p>Either an object of type <code>covariateSettings</code> as created using one of
the createTemporalCovariateSettings function in the FeatureExtraction package, or a list
of such objects.</p></dd>
<dt>minCellCount</dt>
<dd><p>The minimum cell count for fields contains person counts or fractions.</p></dd>
<dt>incremental</dt>
<dd><p>Create only cohort diagnostics that haven't been created before?</p></dd>
<dt>incrementalFolder</dt>
<dd><p>If <code>incremental = TRUE</code>, specify a folder where records are kept
of which cohort diagnostics has been executed.</p></dd>
</dl></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co"># Load cohorts (assumes that they have already been instantiated)</span></span>
<span class="r-in"><span class="va">cohortTableNames</span> <span class="op">&lt;-</span> <span class="fu">CohortGenerator</span><span class="fu">::</span><span class="fu"><a href="https://ohdsi.github.io/CohortGenerator/reference/getCohortTableNames.html" class="external-link">getCohortTableNames</a></span><span class="op">(</span>cohortTable <span class="op">=</span> <span class="st">"cohort"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">cohorts</span> <span class="op">&lt;-</span> <span class="fu"><a href="loadCohortsFromPackage.html">loadCohortsFromPackage</a></span><span class="op">(</span>packageName <span class="op">=</span> <span class="st">"MyGreatPackage"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">connectionDetails</span> <span class="op">&lt;-</span> <span class="fu">createConnectionDetails</span><span class="op">(</span>dbms <span class="op">=</span> <span class="st">"postgresql"</span>,</span>
<span class="r-in">                                             server <span class="op">=</span> <span class="st">"ohdsi.com"</span>,</span>
<span class="r-in">                                             port <span class="op">=</span> <span class="fl">5432</span>,</span>
<span class="r-in">                                             user <span class="op">=</span> <span class="st">"me"</span>,</span>
<span class="r-in">                                             password <span class="op">=</span> <span class="st">"secure"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">executeDiagnostics</span><span class="op">(</span>cohorts <span class="op">=</span> <span class="va">cohorts</span>,</span>
<span class="r-in">                   exportFolder <span class="op">=</span> <span class="st">"export"</span>,</span>
<span class="r-in">                   cohortTableNames <span class="op">=</span> <span class="va">cohortTableNames</span>,</span>
<span class="r-in">                   cohortDatabaseSchema <span class="op">=</span> <span class="st">"results"</span>,</span>
<span class="r-in">                   cdmDatabaseSchema <span class="op">=</span> <span class="st">"cdm"</span>,</span>
<span class="r-in">                   databaseId <span class="op">=</span> <span class="st">"mySpecialCdm"</span>,</span>
<span class="r-in">                   connectionDetails <span class="op">=</span> <span class="va">connectionDetails</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Use a custom set of cohorts defined in a data.frame</span></span>
<span class="r-in"><span class="va">cohorts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span class="r-in">  cohortId <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>,</span>
<span class="r-in">  cohortName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Cohort Name"</span><span class="op">)</span>,</span>
<span class="r-in">  logicDescription <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"My Cohort"</span><span class="op">)</span>,</span>
<span class="r-in">  sql <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">"path_to.sql"</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">  json <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">"path_to.json"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="fu">executeDiagnostics</span><span class="op">(</span>cohorts <span class="op">=</span> <span class="va">cohorts</span>,</span>
<span class="r-in">                   exportFolder <span class="op">=</span> <span class="st">"export"</span>,</span>
<span class="r-in">                   cohortTable <span class="op">=</span> <span class="st">"cohort"</span>,</span>
<span class="r-in">                   cohortDatabaseSchema <span class="op">=</span> <span class="st">"results"</span>,</span>
<span class="r-in">                   cdmDatabaseSchema <span class="op">=</span> <span class="st">"cdm"</span>,</span>
<span class="r-in">                   databaseId <span class="op">=</span> <span class="st">"mySpecialCdm"</span>,</span>
<span class="r-in">                   connectionDetails <span class="op">=</span> <span class="va">connectionDetails</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Gowtham Rao, Martijn Schuemie, Patrick Ryan, James Weaver, Jamie Gilbert.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

